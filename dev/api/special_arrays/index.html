<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Special Arrays · Mill.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="Mill.jl logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="Mill.jl logo"/></a><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../motivation/">Motivation</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../manual/nodes/">Nodes</a></li><li><a class="tocitem" href="../../manual/more_on_nodes/">More on nodes</a></li><li><a class="tocitem" href="../../manual/reflectin/">Model reflection</a></li><li><a class="tocitem" href="../../manual/aggregation/">Bag aggregation</a></li><li><a class="tocitem" href="../../manual/leaf_data/">Data in leaves</a></li><li><a class="tocitem" href="../../manual/missing/">Missing data</a></li><li><a class="tocitem" href="../../manual/custom/">Custom nodes</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/musk/musk/">Musk</a></li><li><a class="tocitem" href="../../examples/gnn/">GNNs in 16 lines</a></li><li><a class="tocitem" href="../../examples/dag/">DAGs</a></li><li><a class="tocitem" href="../../examples/jsons/">Processing JSONs</a></li></ul></li><li><span class="tocitem">External tools</span><ul><li><a class="tocitem" href="../../tools/hierarchical/">HierarchicalUtils.jl</a></li></ul></li><li><span class="tocitem">Public API</span><ul><li><a class="tocitem" href="../aggregation/">Aggregation</a></li><li><a class="tocitem" href="../bags/">Bags</a></li><li><a class="tocitem" href="../data_nodes/">Data nodes</a></li><li><a class="tocitem" href="../model_nodes/">Model nodes</a></li><li class="is-active"><a class="tocitem" href>Special Arrays</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#API"><span>API</span></a></li></ul></li><li><a class="tocitem" href="../switches/">Switches</a></li><li><a class="tocitem" href="../utilities/">Utilities</a></li></ul></li><li><a class="tocitem" href="../../references/">References</a></li><li><a class="tocitem" href="../../citation/">Citation</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Public API</a></li><li class="is-active"><a href>Special Arrays</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Special Arrays</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/CTUAvastLab/Mill.jl/blob/master/docs/src/api/special_arrays.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Special-arrays"><a class="docs-heading-anchor" href="#Special-arrays">Special arrays</a><a id="Special-arrays-1"></a><a class="docs-heading-anchor-permalink" href="#Special-arrays" title="Permalink"></a></h1><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#Mill.MaybeHotMatrix"><code>Mill.MaybeHotMatrix</code></a></li><li><a href="#Mill.MaybeHotVector"><code>Mill.MaybeHotVector</code></a></li><li><a href="#Mill.NGramIterator"><code>Mill.NGramIterator</code></a></li><li><a href="#Mill.NGramIterator-Tuple{AbstractString, Any, Any, Any}"><code>Mill.NGramIterator</code></a></li><li><a href="#Mill.NGramMatrix"><code>Mill.NGramMatrix</code></a></li><li><a href="#Mill.NGramMatrix-Tuple{Missing}"><code>Mill.NGramMatrix</code></a></li><li><a href="#Mill.PostImputingMatrix"><code>Mill.PostImputingMatrix</code></a></li><li><a href="#Mill.PostImputingMatrix-Tuple{AbstractMatrix}"><code>Mill.PostImputingMatrix</code></a></li><li><a href="#Mill.PreImputingMatrix-Tuple{AbstractMatrix}"><code>Mill.PreImputingMatrix</code></a></li><li><a href="#Mill.PreImputingMatrix"><code>Mill.PreImputingMatrix</code></a></li><li><a href="#Mill.countngrams"><code>Mill.countngrams</code></a></li><li><a href="#Mill.countngrams!"><code>Mill.countngrams!</code></a></li><li><a href="#Mill.maybecold"><code>Mill.maybecold</code></a></li><li><a href="#Mill.maybehot"><code>Mill.maybehot</code></a></li><li><a href="#Mill.maybehotbatch"><code>Mill.maybehotbatch</code></a></li><li><a href="#Mill.ngrams"><code>Mill.ngrams</code></a></li><li><a href="#Mill.ngrams!"><code>Mill.ngrams!</code></a></li><li><a href="#Mill.postimputing_dense"><code>Mill.postimputing_dense</code></a></li><li><a href="#Mill.preimputing_dense"><code>Mill.preimputing_dense</code></a></li></ul><h2 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Mill.MaybeHotVector" href="#Mill.MaybeHotVector"><code>Mill.MaybeHotVector</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MaybeHotVector{T, U, V} &lt;: AbstractVector{V}</code></pre><p>A vector-like structure for representing one-hot encoded variables. Like <code>Flux.OneHotVector</code> but supports <code>missing</code> values.</p><p>Construct with the <a href="#Mill.maybehot"><code>maybehot</code></a> function.</p><p>See also: <a href="#Mill.MaybeHotMatrix"><code>MaybeHotMatrix</code></a>, <a href="#Mill.maybehotbatch"><code>maybehotbatch</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/maybe_hot_vector.jl#L1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.maybehot" href="#Mill.maybehot"><code>Mill.maybehot</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">maybehot(l, labels)</code></pre><p>Return a <a href="#Mill.MaybeHotVector"><code>MaybeHotVector</code></a> where the first occurence of <code>l</code> in <code>labels</code> is set to <code>1</code> and all other elements are set to <code>0</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; maybehot(:b, [:a, :b, :c])
3-element MaybeHotVector with eltype Bool:
 ⋅
 1
 ⋅

julia&gt; maybehot(missing, 1:3)
3-element MaybeHotVector with eltype Missing:
 missing
 missing
 missing</code></pre><p>See also: <a href="#Mill.maybehotbatch"><code>maybehotbatch</code></a>, <a href="#Mill.MaybeHotVector"><code>MaybeHotVector</code></a>, <a href="#Mill.MaybeHotMatrix"><code>MaybeHotMatrix</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/maybe_hot_vector.jl#L71-L93">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.MaybeHotMatrix" href="#Mill.MaybeHotMatrix"><code>Mill.MaybeHotMatrix</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MaybeHotMatrix{T, U, V} &lt;: AbstractMatrix{V}</code></pre><p>A matrix-like structure for representing one-hot encoded variables. Like <code>Flux.OneHotMatrix</code> but supports <code>missing</code> values.</p><p>Construct with the <a href="#Mill.maybehotbatch"><code>maybehotbatch</code></a> function.</p><p>See also: <a href="#Mill.MaybeHotVector"><code>MaybeHotVector</code></a>, <a href="#Mill.maybehot"><code>maybehot</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/maybe_hot_matrix.jl#L1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.maybehotbatch" href="#Mill.maybehotbatch"><code>Mill.maybehotbatch</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">maybehotbatch(ls, labels)</code></pre><p>Return a <a href="#Mill.MaybeHotMatrix"><code>MaybeHotMatrix</code></a> in which each column corresponds to one element of <code>ls</code> containing <code>1</code> at its first occurence in <code>labels</code> with all other elements set to <code>0</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; maybehotbatch([:c, :a], [:a, :b, :c])
3×2 MaybeHotMatrix with eltype Bool:
 ⋅  1
 ⋅  ⋅
 1  ⋅

julia&gt; maybehotbatch([missing, 2], 1:3)
3×2 MaybeHotMatrix with eltype Union{Missing, Bool}:
 missing    ⋅
 missing   true
 missing    ⋅</code></pre><p>See also: <a href="#Mill.maybehot"><code>maybehot</code></a>, <a href="#Mill.MaybeHotMatrix"><code>MaybeHotMatrix</code></a>, <a href="#Mill.MaybeHotVector"><code>MaybeHotVector</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/maybe_hot_matrix.jl#L85-L107">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.maybecold" href="#Mill.maybecold"><code>Mill.maybecold</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">maybecold(y, labels=1:size(y,1))</code></pre><p>Similar to <code>Flux.onecold</code> but when <code>y</code> contains <code>missing</code> values, <code>missing</code> is in the result as well.</p><p>Therefore, it is roughly the inverse operation of <a href="#Mill.maybehot"><code>maybehot</code></a> or <a href="#Mill.maybehotbatch"><code>maybehotbatch</code></a>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; maybehot(:b, [:a, :b, :c])
3-element MaybeHotVector with eltype Bool:
 ⋅
 1
 ⋅

julia&gt; maybecold(ans, [:a, :b, :c])
:b

julia&gt; maybehot(missing, 1:3)
3-element MaybeHotVector with eltype Missing:
 missing
 missing
 missing

julia&gt; maybecold(ans)
missing

julia&gt; maybecold(maybehotbatch([missing, 2], 1:3))
2-element Vector{Union{Missing, Int64}}:
  missing
 2</code></pre><p>See also: <code>Flux.onecold</code>, <a href="#Mill.maybehot"><code>maybehot</code></a>, <a href="#Mill.maybehotbatch"><code>maybehotbatch</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/special_arrays.jl#L26-L60">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.NGramIterator" href="#Mill.NGramIterator"><code>Mill.NGramIterator</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NGramIterator{T}</code></pre><p>Iterates over ngram codes of collection of integers <code>s</code> using <a href="../switches/#Mill.string_start_code"><code>Mill.string_start_code()</code></a> and <a href="../switches/#Mill.string_end_code"><code>Mill.string_end_code()</code></a> for padding. NGram codes are computed as in positional number systems, where items of <code>s</code> are digits, <code>b</code> is the base, and <code>m</code> is modulo.</p><p>In order to reduce collisions when mixing ngrams of different order one should avoid zeros and negative integers in <code>s</code> and should set base <code>b</code> to the expected number of unique tokens in <code>s</code>.</p><p>See also: <a href="#Mill.NGramMatrix"><code>NGramMatrix</code></a>, <a href="#Mill.ngrams"><code>ngrams</code></a>, <a href="#Mill.ngrams!"><code>ngrams!</code></a>, <a href="#Mill.countngrams"><code>countngrams</code></a>,     <a href="#Mill.countngrams!"><code>countngrams!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/ngram_matrix.jl#L4-L13">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.NGramIterator-Tuple{AbstractString, Any, Any, Any}" href="#Mill.NGramIterator-Tuple{AbstractString, Any, Any, Any}"><code>Mill.NGramIterator</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">NGramIterator(s, n=3, b=256, m=typemax(Int))</code></pre><p>Construct an <a href="#Mill.NGramIterator"><code>NGramIterator</code></a>. If <code>s</code> is an <code>AbstractString</code> it is first converted to integers with <code>Base.codeunits</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; NGramIterator(&quot;deadbeef&quot;, 3, 256, 17) |&gt; collect
10-element Vector{Int64}:
  2
 16
  9
  9
  6
 10
 11
 15
  2
  6

julia&gt; NGramIterator(collect(1:9), 3, 10, 1009) |&gt; collect
11-element Vector{Int64}:
 221
 212
 123
 234
 345
 456
 567
 678
 789
 893
 933

julia&gt; Mill.string_start_code()
0x02

julia&gt; Mill.string_end_code()
0x03</code></pre><p>See also: <a href="#Mill.NGramMatrix"><code>NGramMatrix</code></a>, <a href="#Mill.ngrams"><code>ngrams</code></a>, <a href="#Mill.ngrams!"><code>ngrams!</code></a>, <a href="#Mill.countngrams"><code>countngrams</code></a>,     <a href="#Mill.countngrams!"><code>countngrams!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/ngram_matrix.jl#L23-L67">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.ngrams" href="#Mill.ngrams"><code>Mill.ngrams</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">ngrams(o, x, n=3, b=256)</code></pre><p>Return codes of <code>n</code> grams of <code>x</code> using base <code>b</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; ngrams(&quot;foo&quot;, 3, 256)
5-element Vector{Int64}:
  131686
  157295
 6713199
 7302915
 7275267</code></pre><p>See also: <a href="#Mill.ngrams!"><code>ngrams!</code></a>, <a href="#Mill.countngrams"><code>countngrams</code></a>,     <a href="#Mill.countngrams!"><code>countngrams!</code></a>, <a href="#Mill.NGramMatrix"><code>NGramMatrix</code></a>, <a href="#Mill.NGramIterator"><code>NGramIterator</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/ngram_matrix.jl#L139-L157">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.ngrams!" href="#Mill.ngrams!"><code>Mill.ngrams!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">ngrams!(o, x, n=3, b=256)</code></pre><p>Store codes of <code>n</code> grams of <code>x</code> using base <code>b</code> to <code>o</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; o = zeros(Int, 5)
5-element Vector{Int64}:
 0
 0
 0
 0
 0

julia&gt; ngrams!(o, &quot;foo&quot;, 3, 256)
5-element Vector{Int64}:
  131686
  157295
 6713199
 7302915
 7275267</code></pre><p>See also: <a href="#Mill.ngrams"><code>ngrams</code></a>, <a href="#Mill.countngrams"><code>countngrams</code></a>,     <a href="#Mill.countngrams!"><code>countngrams!</code></a>, <a href="#Mill.NGramMatrix"><code>NGramMatrix</code></a>, <a href="#Mill.NGramIterator"><code>NGramIterator</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/ngram_matrix.jl#L105-L131">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.countngrams" href="#Mill.countngrams"><code>Mill.countngrams</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">countngrams(o, x, n, b, m)</code></pre><p>Count the number of of <code>n</code> grams of <code>x</code> using base <code>b</code> and modulo <code>m</code> into a vector of length <code>m</code> in case <code>x</code> is a single sequence or into a matrix with <code>m</code> rows if <code>x</code> is an iterable of sequences.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; countngrams(&quot;foo&quot;, 3, 256, 5)
5-element Vector{Int64}:
 2
 1
 1
 0
 1

julia&gt; countngrams([&quot;foo&quot;, &quot;bar&quot;], 3, 256, 5)
5×2 Matrix{Int64}:
 2  1
 1  0
 1  2
 0  0
 1  2</code></pre><p>See also: <a href="#Mill.countngrams!"><code>countngrams!</code></a>, <a href="#Mill.ngrams"><code>ngrams</code></a>, <a href="#Mill.ngrams!"><code>ngrams!</code></a>,     <a href="#Mill.NGramMatrix"><code>NGramMatrix</code></a>, <a href="#Mill.NGramIterator"><code>NGramIterator</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/ngram_matrix.jl#L195-L222">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.countngrams!" href="#Mill.countngrams!"><code>Mill.countngrams!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">countngrams!(o, x, n, b, m=length(o))</code></pre><p>Count the number of of <code>n</code> grams of <code>x</code> using base <code>b</code> and modulo <code>m</code> and store the result to <code>o</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; o = zeros(Int, 5)
5-element Vector{Int64}:
 0
 0
 0
 0
 0

julia&gt; countngrams!(o, &quot;foo&quot;, 3, 256)
5-element Vector{Int64}:
 2
 1
 1
 0
 1</code></pre><p>See also: <a href="#Mill.countngrams"><code>countngrams</code></a>, <a href="#Mill.ngrams"><code>ngrams</code></a>, <a href="#Mill.ngrams!"><code>ngrams!</code></a>,     <a href="#Mill.NGramMatrix"><code>NGramMatrix</code></a>, <a href="#Mill.NGramIterator"><code>NGramIterator</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/ngram_matrix.jl#L160-L186">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.NGramMatrix" href="#Mill.NGramMatrix"><code>Mill.NGramMatrix</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NGramMatrix{T, U, V} &lt;: AbstractMatrix{U}</code></pre><p>A matrix-like structure for lazily representing sequences like strings as ngrams of cardinality <code>n</code> using <code>b</code> as a base for calculations and <code>m</code> as the modulo. Therefore, the matrix has <code>m</code> rows and one column for representing each sequence. Missing sequences are supported.</p><p>See also: <a href="#Mill.NGramIterator"><code>NGramIterator</code></a>, <a href="#Mill.ngrams"><code>ngrams</code></a>, <a href="#Mill.ngrams!"><code>ngrams!</code></a>, <a href="#Mill.countngrams"><code>countngrams</code></a>,     <a href="#Mill.countngrams!"><code>countngrams!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/ngram_matrix.jl#L232-L241">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.NGramMatrix-Tuple{Missing}" href="#Mill.NGramMatrix-Tuple{Missing}"><code>Mill.NGramMatrix</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">NGramMatrix(s, n=3, b=256, m=2053)</code></pre><p>Construct an <a href="#Mill.NGramMatrix"><code>NGramMatrix</code></a>. <code>s</code> can either be a single sequence or any <code>AbstractVector</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; NGramMatrix([1,2,3])
2053×1 NGramMatrix{Vector{Int64}, Vector{Vector{Int64}}, Int64}:
 [1, 2, 3]

julia&gt; NGramMatrix([&quot;a&quot;, missing, &quot;c&quot;], 2, 128)
2053×3 NGramMatrix{Union{Missing, String}, Vector{Union{Missing, String}}, Union{Missing, Int64}}:
 &quot;a&quot;
 missing
 &quot;c&quot;</code></pre><p>See also: <a href="#Mill.NGramIterator"><code>NGramIterator</code></a>, <a href="#Mill.ngrams"><code>ngrams</code></a>, <a href="#Mill.ngrams!"><code>ngrams!</code></a>, <a href="#Mill.countngrams"><code>countngrams</code></a>,     <a href="#Mill.countngrams!"><code>countngrams!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/ngram_matrix.jl#L255-L275">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.PostImputingMatrix" href="#Mill.PostImputingMatrix"><code>Mill.PostImputingMatrix</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">PostImputingMatrix{T &lt;: Number, U &lt;: AbstractMatrix{T}, V &lt;: AbstractVector{T}} &lt;: AbstractMatrix{T}</code></pre><p>A parametrized matrix that fills in a default vector of parameters whenever a &quot;missing&quot; column is encountered during multiplication.</p><p>Supports multiplication with <a href="#Mill.NGramMatrix"><code>NGramMatrix</code></a>, <a href="#Mill.MaybeHotMatrix"><code>MaybeHotMatrix</code></a> and <a href="#Mill.MaybeHotVector"><code>MaybeHotVector</code></a>. For any other <code>AbstractMatrix</code> it falls back to standard multiplication.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; A = PostImputingMatrix(ones(2, 2), -ones(2))
2×2 PostImputingMatrix{Float64, Matrix{Float64}, Vector{Float64}}:
W:
 1.0  1.0
 1.0  1.0

ψ:
 -1.0
 -1.0

julia&gt; A * maybehotbatch([1, missing], 1:2)
2×2 Matrix{Float64}:
 1.0  -1.0
 1.0  -1.0</code></pre><p>See also: <a href="#Mill.PreImputingMatrix"><code>PreImputingMatrix</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/postimputing_matrix.jl#L1-L29">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.PostImputingMatrix-Tuple{AbstractMatrix}" href="#Mill.PostImputingMatrix-Tuple{AbstractMatrix}"><code>Mill.PostImputingMatrix</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">PostImputingMatrix(W::AbstractMatrix{T}, ψ=zeros(T, size(W, 1))) where T</code></pre><p>Construct a <a href="#Mill.PostImputingMatrix"><code>PostImputingMatrix</code></a> with multiplication parameters <code>W</code> and default parameters <code>ψ</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; PostImputingMatrix([1 2; 3 4])
2×2 PostImputingMatrix{Int64, Matrix{Int64}, Vector{Int64}}:
W:
 1  2
 3  4

ψ:
 0
 0</code></pre><p>See also: <a href="#Mill.PreImputingMatrix"><code>PreImputingMatrix</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/postimputing_matrix.jl#L37-L56">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.postimputing_dense" href="#Mill.postimputing_dense"><code>Mill.postimputing_dense</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">postimputing_dense(d_in, d_out, σ)</code></pre><p>Like <code>Flux.Dense</code>, but use a <a href="#Mill.PostImputingMatrix"><code>PostImputingMatrix</code></a> instead of a standard matrix.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; d = postimputing_dense(3, 2)
[postimputing]Dense(3, 2) 	# 3 arrays, 10 params, 160 bytes

julia&gt; typeof(d.weight)
PostImputingMatrix{Float32, Matrix{Float32}, Vector{Float32}}

julia&gt; typeof(d.bias)
Vector{Float32} (alias for Array{Float32, 1})</code></pre><p>See also: <a href="#Mill.PostImputingMatrix"><code>PostImputingMatrix</code></a>, <a href="#Mill.preimputing_dense"><code>preimputing_dense</code></a>, <a href="#Mill.PreImputingMatrix"><code>PreImputingMatrix</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/special_arrays.jl#L131-L149">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.PreImputingMatrix" href="#Mill.PreImputingMatrix"><code>Mill.PreImputingMatrix</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">PreImputingMatrix{T &lt;: Number, U &lt;: AbstractMatrix{T}, V &lt;: AbstractVector{T}} &lt;: AbstractMatrix{T}</code></pre><p>A parametrized matrix that fills in elements from a default vector of parameters whenever a <code>missing</code> element is encountered during multiplication.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; A = PreImputingMatrix(ones(2, 2), -ones(2))
2×2 PreImputingMatrix{Float64, Matrix{Float64}, Vector{Float64}}:
W:
 1.0  1.0
 1.0  1.0

ψ:
 -1.0  -1.0

julia&gt; A * [0 1; missing -1]
2×2 Matrix{Float64}:
 -1.0  0.0
 -1.0  0.0</code></pre><p>See also: <a href="#Mill.PreImputingMatrix"><code>PreImputingMatrix</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/preimputing_matrix.jl#L1-L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.PreImputingMatrix-Tuple{AbstractMatrix}" href="#Mill.PreImputingMatrix-Tuple{AbstractMatrix}"><code>Mill.PreImputingMatrix</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">PreImputingMatrix(W::AbstractMatrix{T}, ψ=zeros(T, size(W, 2))) where T</code></pre><p>Construct a <a href="#Mill.PreImputingMatrix"><code>PreImputingMatrix</code></a> with multiplication parameters <code>W</code> and default parameters <code>ψ</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; PreImputingMatrix([1 2; 3 4])
2×2 PreImputingMatrix{Int64, Matrix{Int64}, Vector{Int64}}:
W:
 1  2
 3  4

ψ:
 0  0</code></pre><p>See also: <a href="#Mill.PostImputingMatrix"><code>PostImputingMatrix</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/preimputing_matrix.jl#L33-L51">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mill.preimputing_dense" href="#Mill.preimputing_dense"><code>Mill.preimputing_dense</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">preimputing_dense(in, out, σ)</code></pre><p>Like <code>Flux.Dense</code>, but use a <a href="#Mill.PreImputingMatrix"><code>PreImputingMatrix</code></a> instead of a standard matrix.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; d = preimputing_dense(2, 3)
[preimputing]Dense(2, 3) 	# 3 arrays, 11 params, 164 bytes

julia&gt; typeof(d.weight)
PreImputingMatrix{Float32, Matrix{Float32}, Vector{Float32}}

julia&gt; typeof(d.bias)
Vector{Float32} (alias for Array{Float32, 1})</code></pre><p>See also: <a href="#Mill.PreImputingMatrix"><code>PreImputingMatrix</code></a>, <a href="#Mill.postimputing_dense"><code>postimputing_dense</code></a>, <a href="#Mill.PostImputingMatrix"><code>PostImputingMatrix</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CTUAvastLab/Mill.jl/blob/61914f03d044a2b366015c42bd3f091f71341fb7/src/special_arrays/special_arrays.jl#L109-L127">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../model_nodes/">« Model nodes</a><a class="docs-footer-nextpage" href="../switches/">Switches »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.14 on <span class="colophon-date" title="Thursday 3 March 2022 21:16">Thursday 3 March 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
